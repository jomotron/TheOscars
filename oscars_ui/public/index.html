<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Academy Awards Finder</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/yearpicker.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="title">
          <h1><center>Academy Awards Winners & Nominees Finder</center></h1>
      </div>
      <div class="main">
        
        <div class="input-group">
          <label class="label">Nominee:</label>
          <input class="input-style-1" type="text" name="origin" placeholder=" Enter name of actor..." required="required">
        </div>
        <div class="input-group">
          <label class="label">Film Title:</label>
          <input class="input-style-1" type="text" name="origin" placeholder=" Enter name of film..." required="required">
        </div>
        <div class="row row-space">
          <div class="col-2">
            <label class="label">Ceremony year:</label>
            <input type="text" class="yearpicker form-control" value="" />    
          </div>
       
          <div class="row row-space">
            <div class="col-2">
              <label class="label">Film year:</label>
              <input type="text" class="yearpicker form-control" value="" />    
            </div>
    </div>
      </div>
      <div class="p-t-5">
        <label class="label">Display searches by:</label>
        <br>
        <label class="checkbox-container m-r-45">Alphabetical Order
            <input type="checkbox" name="abc-order">
            <span class="checkmark"></span>
        </label>
        <label class="checkbox-container m-r-45">By year made
            <input type="checkbox" name="year-made">
            <span class="checkmark"></span>
        </label>
        <label class="checkbox-container">Awards won
            <input type="checkbox" checked="checked" name="awards-won">
            <span class="checkmark"></span>
        </label>
    </div>
    <button id="submit" class="btn-submit" type="submit">search</button>

    <div id="test">

    </div>

    </div>

    <script src="js/yearpicker.js"></script>
    <script>
      $(document).ready(function() {
        //TODO: Grab parameters from inputs. The endpoint: year/range/:year1/:year2
        let endpoint = 'http://localhost:3000/year/range/1991/1992'

        $(".yearpicker").yearpicker({
          year: 2021,
          startYear: 1927,
          endYear: 2030
        });


        //Grab the restuls and appends a div with results inside test div. 
        //Currenlty only does 50 items. 
        //However there will be more and should be handled
        $( "#submit" ).click(function() {
          $.ajax({
            url: endpoint,
            contentType: "application/json",
            dataType: 'json',
            success: function(result){
                for(var i = 0; i < 50; i++){
                  $('#test').append('<div>' + "Film: "+ result[0][i].film + ", " + "Year Film: "+ result[0][i].category + ", " +"Category: " + result[0][i].category + ", " + "Winner: "+ result[0][i].winner +  '</div>'); 
                }
            }
          });
        });
      });
    </script>
  </body>
</html>

